- c1
  - Register c1:c1123
    - Success
- c2
  - Register c1:password
    - Invalid
- c1
  - Login c1:c1234
    - 401
  - Login c2:c1123
    - 404
  - Login c1:c1123
    - Success
  - Log out
  - Log in again
  - List available books
    - None
  - Search book by title
    - None
  - Add book b1:ab1:gb1:db1
    - Success
  - Add book b2:ab2:gb2:db2
    - Success
  - List available books
    - None
  - List lent books
    - b1, b2
  - List received borrow requests
    - None
  - List sent borrow requests
    - None
- c2
  - Register c2:c2123
    - Success
  - Log in c2:c2123
    - Success
  - List available books
    - b1, b2
  - View detailed information about b1
    - b2:ab2:gb2:db2
  - Add book b3:ab3:gb3:db3
  - List available books
    - b1, b2
- c3
  - Register c3:c3123:admin
  - Log in c3:c3123:admin
    - Success
  - List borrowed books
    - None
  - List available books
    - b1, b2, b3
  - List borrow requests
    - None
- c2
  - List books
    - b1, b2
  - Borrow b1
  - List books
    - b2
  - Borrow b2
  - List books
    - None
  - List sent borrow requests
    - rb1, rb2
- c1
  - List received borrow requests
    - rb1, rb2
  - Borrow b3
  - List sent borrow requests
    - rb3
- c3
  - List borrow requests
    - rb1 (pending), rb2 (pending), rb3 (pending)
  - List borrowed books
    - None
- c2
  - Chat with user of request rb3
    - Error, not borrowed
  - Accept rb3
  - Accept rb3
    - Error, not pending
  - Chat with user of request rb3
    - No messages
  - Send message m1rb3
    - Success
- c3
  - List borrowed books
    - b3
- c1
  - Reject rb1
  - Chat with user of rb1
    - Error, not borrowed
  - List sent borrow requests and chat with user of rb3 (it is the same user but a different request)
    - m1rb3
  - Send message m2rb3
  - Chat with user of rb3
    - m1rb3, m2rb3
  - Delete b2
  - List received borrow requests
    - rb1 (rejected)
- c3
  - List borrowed books
    - b3
  - List available books
    - b1
  - List borrow requests
    - rb3 (borrowed), rb1 (rejected)
- c1
  - Return b3
    - Success
  - Return b3
    - Error, not borrowed
- c3
  - List borrowed books
    - none
  - List available books
    - b1, b3
  - List borrow requests
    - rb3 (returned), rb1 (rejected)
- c1
  - Re-add b2:ab2:gb2:db2
    - Success
- c2
  - Search by author ab2
    - b2
  - Search by genre gb1
    - b1
  - Search by title b2
    - b2
  - List all available books
    - b1, b2
  - Borrow b1 (rb1_2)
- c1
  - List received borrow requests, accept rb1_2
    - Success
  - Start chat with user of rb1_2
- c2
  - List sent borrow requests
  - Start chat with user of rb1_2
  - Send a message m3
    - Observe m3 getting sent in real time at c1
- c1
  - Send a message m4 in rb1_2
    - Observe m4 getting sent in real time at c2
- c2
  - Prematurely exit while in chat
- c1
  - Send a message m5 in rb1_2
    - Success
  - Exit chat
  - List messages in rb1_2
    - m1, m2, m3, m4, m5
